{% extends "header.html" %}

{% block content %}

    <h1>{{trail.name}} in <a href="{{ url_for('park', park_id=park.key().id())}}">{{ park.name }}</a></h1>
    <!-- <p>{{ trail.description }}</p> -->
    
    <!-- notify user of any changes -->
    <!-- {% with messages = get_flashed_messages() %}
        {% if messages %}
            <ul>
            {% for message in messages %}
                <li><strong>{{ message }}</strong></li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %} -->
    
    <a href="{{ url_for('deleteTrail', park_id=park.key().id(), trail_id=trail.key().id()) }}">Delete</a>
    <a href="{{ url_for('editTrail', park_id=park.key().id(), trail_id=trail.key().id()) }}">Edit</a>

    <!-- Trail Map -->
    <div class="section" id="trail_map">

    </div>
    <!-- Trail Map -->

    <div class="mini-section"></div>

    <!-- PREP MAP -->
    <div class="section">

        <!-- Menu -->
        <div class="menu" data-bind="with: currentPlace">
            <!-- Close icon -->
            <div class="icon-close">
                <img id="close-btn" data-bind="click: $parent.closeMenu" src="/static/imgs/google_icons/ic_cancel_white_36dp/web/ic_cancel_white_36dp_1x.png" alt="close-icon">
            </div>
            <!-- Current Marker Info -->
            <h1 data-bind="text: name"></h1>
        </div>

        <!-- Prep Map -->
        <div class="map-canvas" id="prep_map"></div>

    </div>
    <!-- Prep Map -->

    <!-- Prep Map Nav -->
    <div class="slider_bar" id="prepMapnav">
        <ul class="btns" data-bind="foreach:prep_btns">
            <li class="services-btn"><img data-bind="attr: {src: img, title: title, alt: alt}, click: $parent.search"></li>
            <li>|</li>
        </ul>
    </div>
    <!-- End Prep Map Nav -->

    <!-- Page CSS -->
    <link rel="stylesheet" type="text/css" href="/static/css/trail.css"></link>
    <!-- JQuery -->
    <script src="/static/js/jquery/jquery.js"></script>
    <!-- Knockout -->
    <script src="/static/js/knockout/knockout-3.4.0.js"></script>
    <!-- Page JS -->
    <script src="/static/js/trail.js"></script>
    <script>var trail = JSON.parse('{{trail_json|safe}}');</script>

    <!-- Google Maps -->
    <script onload="main( trail )" onerror="mapError()" src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyB9HruWNEZUBfdIyuBEehLKI0whMeX_bAQ&libraries=places" async defer></script>
{% endblock %}